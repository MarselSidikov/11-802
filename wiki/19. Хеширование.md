# Хеширование и HashMap

[Ссылка на аналогичную тему](https://github.com/MarselSidikov/JAVA_LEARN/wiki/%2323.-Maps)

* Процесс отображения битовой последовательности в битовую последовательность (возможно другого размера) по определенному правило.

* Хеширование в java - процесс отображения переменной любого типа в число типа int.

## Хеширование строки

### Способ 1. 

Строка A = {a0, a1, ... aN}

Hash = a0 + a1 + a2 + ... + aN

Минусы:
1) Коллизий очень много. Например, слово РЕХ и слово ЕРХ дадут одно значение.

Решение - учитывать позицию

### Способ 2

Hash = a0 * 0 + a1 * 1 + a2 * 2 + ... + aN*N

1) Все равно коллизий много.

Решение - добавить специальный множитель, который не раскладывается - то есть простое число.

### Способ 3

s[0]*31^(n - 1) + s[1]*31^(n - 2) + ... + s[n - 1]

```
h = 31 * h + val[i];
```

((31 * 0 + val[0]) * 31 + val[1]) * 31 + val[2]

## HashMap

* Узел

```JAVA
static class Node<K,V> implements Map.Entry<K,V> {
        final int hash;
        final K key;
        V value;
        Node<K,V> next;
        ...
}
```

* Функция вставки

```JAVA
public V put(K key, V value) {
        return putVal(hash(key), key, value, false, true);
    }
```

* Функция внутреннего хеширования

```JAVA
 static final int hash(Object key) {
        int h;
        return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
    }
```

* Зачем?

```
0.01 - 2016046746 - 01111000001010100110111010011010 & 15 = 1010
0.02 - 2017095322 - 01111000001110100110111010011010
0.04 - 2013949594 - 01111000000010100110111010011010
0.03 - -736385303 - 11010100000110111010011011101001

01111000001010100110111010011010 >>> 16 = 

01111000001010100110111010011010
00000000000000000111100000101010
--------------------------------
01111000001010100001011010110000
```
